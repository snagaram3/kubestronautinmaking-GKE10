FROM python:3.11-slim

WORKDIR /app

RUN apt-get update && apt-get install -y build-essential && rm -rf /var/lib/apt/lists/*
RUN pip install --upgrade pip

COPY requirements.txt .
RUN pip install --no-cache-dir -r requirements.txt

COPY protos/ ./protos/
COPY agents/a2a_network.py ./a2a_network.py
COPY agents/customer_service_agent.py ./customer_service_agent.py

ENV PYTHONPATH="/app/protos"

EXPOSE 8080

CMD ["python", "customer_service_agent.py"]
